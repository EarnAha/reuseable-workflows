name: Read all secrets

on:
  workflow_call:
    #inputs:
    outputs:
      AWS_SERVICE_NAME:
        description: "secrets"
        value: ${{ jobs.do.outputs.value }}
    #secrets:
#env:

jobs:
  do:
    runs-on: self-hosted
    steps:
      - name: Decrypt Secret Value
        id: get_secret
        uses: benammann/git-secrets-get-secret-action@v1
        with:
          # Required Parameters:

          # The name of the secret / config entry to resolve
          name: ''

          # The name of the decryptSecret (defined in .git-secrets.json)
          decryptSecretName: ''

          # The value of the decryptSecret (defined in ~/.git-secrets.yaml)
          # IMPORTANT: Pass value via secrets! ${{ secrets.MY_SECRET_NAME }}
          decryptSecretValue: ''

          # Optional Parameters:

          # The filepath to the .git-secret.json file
          # Default: .git-secrets.json
          file: '.git-secrets.json'

          # The context to use
          # Default: default
          context: 'default'

          # Which resource to resolve
          # Either secret or config
          # Default: secret
          resource: 'secret'
      - name: Echo the output
        run: echo "${{ steps.get_secret.outputs.value }}"
    outputs:
      value: ${{ steps.do.outputs.value }}
